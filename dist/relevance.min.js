/*! relevance - v1.1.4 - 2015-02-19
* https://github.com/bboyle/relevance
* Copyright (c) 2015 Ben Boyle; Licensed MIT */
"undefined"!==jQuery&&!function(a){"use strict";var b="relevant",c="irrelevant",d="relevant-done",e="irrelevant-done",f="button, input, select, textarea",g=function(b,c){return a(b.elements[c]).filter('[name="'+c+'"]')},h=function(a){return a.value},i=function(b,c){var d;for("object"!=typeof b&&(b=[b]),d=0;d<c.length;d++)if(-1!==a.inArray(c[d],b))return!0;return!1},j=function(){var b=a(this.form).data("relevance").dependencyMap[this.name],c=a.map(g(this.form,this.name).filter("select,:checked").filter(":visible"),h);a.each(b,function(a,b){b.items.relevance("relevant",i(b.values,c)!==b.negate)})},k=function(b){var c,d,e;c=this.closest("form"),c.length&&(d=c.data("relevance"),"object"==typeof d&&(d=d.dependencyMap,"object"==typeof d&&(e=this.add(this.find("select,input")).filter("select,:radio,:checkbox"),e=a.unique(a.map(e,function(a){return a.name})),a.each(e,function(e,f){var j,k=d[f];"object"==typeof k&&a.each(k,function(d,e){b===!1?e.items.relevance("relevant",!1):(j=a.map(g(c[0],f).filter("select,:checked").filter(":visible"),h),e.items.relevance("relevant",i(e.values,j)!==e.negate))})}))))},l={relevant:function(a){var d;return a?(d=this.filter(":hidden").trigger(b),d.length&&k.call(d)):(d=this.filter(":visible").trigger(c),d.length&&k.call(d,!1)),this},show:function(){return this.add(this.find(f)).not(this.find("[hidden]").find(f)).each(function(){this.removeAttribute("disabled")}),this.stop(!0,!0).removeAttr("hidden").removeAttr("aria-hidden").slideDown(function(){a(this).trigger(d)})},hide:function(){return this.stop(!0,!0).hide(0,function(){var b=a(this);b.filter(f).add(b.find(f)).each(function(){this.setAttribute("disabled","disabled")}),this.setAttribute("hidden","hidden"),this.setAttribute("aria-hidden","true"),b.trigger(e)})},relevantWhen:function(b){var c,d,e,f;return f=b.values||[b.value],b.name?e=b.name:b.id?e=document.getElementById(b.id).name:b.container&&(e=a(b.container).find("select,:radio,:checkbox").attr("name")),b.negate=b.negate===!0,c=this.closest("form"),d=c.data("relevance"),"object"!=typeof d&&(d={},c.data("relevance",d)),"object"!=typeof d.dependencyMap&&(d.dependencyMap={}),"object"!=typeof d.dependencyMap[e]&&(d.dependencyMap[e]=[],g(c[0],e).filter(":radio,:checkbox").bind("click",j).end().filter("select").bind("change",j)),d.dependencyMap[e].push({items:this,values:f,negate:b.negate}),this.relevance("relevant",i(f,a.map(g(c[0],e).filter("select,:checked").filter(":visible"),h))!==b.negate),this},instructions:function(b){return b=a.extend({instructionSelector:".relevance",questionSelector:".questions > li"},b),this.find(b.instructionSelector).each(function(){var c,d,e=a(this),f=e.text().replace(/^[\S\s]*chose \W([^'"’]+)['"’] above[\S\s]*$/,"$1"),g=e.closest(b.questionSelector),j=g.prevAll(b.questionSelector),k=!1;if(/If different to/.test(f))j=j.eq(0),f=j.find(":checkbox").val(),k=!0;else for(c=0;c<j.length;)j.eq(c).is(".section")||(d=a.map(j.eq(c).find("option,:radio,:checkbox"),h),i(f,d)&&(j=j.eq(c))),c++;j=j.add(j.find("select,input")).filter("select,:radio,:checkbox"),g.relevance("relevantWhen",{name:j.attr("name"),value:f,negate:k})}),this}};a(document).bind("relevant irrelevant",function(b){var c=a(b.target);c.relevance("relevant"===b.type?"show":"hide")}),a.fn.relevance=function(b){return l[b]?l[b].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof b&&b?void a.error("Method "+b+" does not exist on jQuery.relevance"):this}}(jQuery);