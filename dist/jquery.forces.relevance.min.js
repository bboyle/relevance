/*! relevance - v1.1.0 - 2013-04-07
* https://github.com/bboyle/relevance
* Copyright (c) 2013 Ben Boyle; Licensed MIT */
"undefined"!==jQuery&&function(e){"use strict";var t="relevant",n="irrelevant",i="relevant-done",r="irrelevant-done",a="button, input, select, textarea",c=function(e){return e.value},l=function(t,n){var i;for("object"!=typeof t&&(t=[t]),i=0;n.length>i;i++)if(-1!==e.inArray(n[i],t))return!0;return!1},o=function(){var t=e(this.form).data("relevance").dependencyMap[this.name],n=e.map(e(this.form.elements[this.name]).filter("select,:checked").filter(":visible"),c);e.each(t,function(e,t){t.items.relevance("relevant",l(t.values,n)!==t.negate)})},s=function(t){var n,i,r;n=this.closest("form"),n.length&&(i=n.data("relevance"),"object"==typeof i&&(i=i.dependencyMap,"object"==typeof i&&(r=this.add(this.find("select,input")).filter("select,:radio,:checkbox"),r=e.unique(e.map(r,function(e){return e.name})),e.each(r,function(r,a){var o,s=i[a];"object"==typeof s&&e.each(s,function(i,r){t===!1?r.items.relevance("relevant",!1):(o=e.map(e(n[0].elements[a]).filter("select,:checked").filter(":visible"),c),r.items.relevance("relevant",l(r.values,o)!==r.negate))})}))))},d={relevant:function(e){var i;return e?(i=this.filter(":hidden").trigger(t),i.length&&s.call(i)):(i=this.filter(":visible").trigger(n),i.length&&s.call(i,!1)),this},show:function(){return this.add(this.find(a)).each(function(){this.removeAttribute("disabled")}),this.stop(!0,!0).removeAttr("hidden").removeAttr("aria-hidden").slideDown(function(){e(this).trigger(i)})},hide:function(){return this.stop(!0,!0).hide(0,function(){var t=e(this);t.filter(a).add(t.find(a)).each(function(){this.setAttribute("disabled","disabled")}),this.setAttribute("hidden","hidden"),this.setAttribute("aria-hidden","true"),t.trigger(r)})},relevantWhen:function(t){var n,i,r,a;return a=t.values||[t.value],t.name?r=t.name:t.id?r=document.getElementById(t.id).name:t.container&&(r=e(t.container).find("select,:radio,:checkbox").attr("name")),t.negate=t.negate===!0,n=this.closest("form"),i=n.data("relevance"),"object"!=typeof i&&(i={},n.data("relevance",i)),"object"!=typeof i.dependencyMap&&(i.dependencyMap={}),"object"!=typeof i.dependencyMap[r]&&(i.dependencyMap[r]=[],e(n[0].elements[r]).filter(":radio,:checkbox").bind("click",o).end().filter("select").bind("change",o)),i.dependencyMap[r].push({items:this,values:a,negate:t.negate}),this.relevance("relevant",l(a,e.map(e(n[0].elements[r]).filter("select,:checked").filter(":visible"),c))!==t.negate),this},instructions:function(t){return t=e.extend({instructionSelector:".relevance",questionSelector:".questions > li"},t),this.find(t.instructionSelector).each(function(){var n,i,r=e(this),a=r.text().replace(/^[\S\s]*chose \W([^'"’]+)['"’] above[\S\s]*$/,"$1"),o=r.closest(t.questionSelector),s=o.prevAll(t.questionSelector),d=!1;if(/If different to/.test(a))s=s.eq(0),a=s.find(":checkbox").val(),d=!0;else for(n=0;s.length>n;)s.eq(n).is(".section")||(i=e.map(s.eq(n).find("option,:radio,:checkbox"),c),l(a,i)&&(s=s.eq(n))),n++;s=s.add(s.find("select,input")).filter("select,:radio,:checkbox"),o.relevance("relevantWhen",{name:s.attr("name"),value:a,negate:d})}),this}};e(document).bind("relevant irrelevant",function(t){var n=e(t.target);"relevant"===t.type?n.relevance("show"):n.relevance("hide")}),e.fn.relevance=function(t){return d[t]?d[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(e.error("Method "+t+" does not exist on jQuery.relevance"),void 0):this}}(jQuery),"undefined"!==jQuery&&function(e){"use strict";e.fn.forcesRelevance=e.fn.relevance}(jQuery);